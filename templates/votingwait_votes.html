{% extends "base.html" %}
{% block title %}Waiting for votes{% endblock %}

{% block content %}
<nav class="top-nav">
  <div class="welcome">Game {{ game_id }} • Round {{ round_num }}</div>
  <a href="{{ url_for('dashboard') }}" class="logout-btn">Leave</a>
</nav>

<h1>Waiting…</h1>

<div class="mainbox">
  <p style="font-size: 1.4rem; font-weight: 600;">
    {{ vote_count }} / {{ player_count }} votes submitted
  </p>

  <div class="join-pill" style="width: 60%; height: 22px;">
    <div
      style="
        height: 100%;
        width: {{ (vote_count * 100) // (player_count if player_count else 1) }}%;
        background: #ff5c5c;
        border-radius: 999px;"
    ></div>
  </div>

  <p style="opacity: 0.75; margin-top: 1rem;">
    This page will advance once everyone votes.
  </p>
</div>

<script>
  // simple polling; swap for websockets later
  setTimeout(() => location.reload(), 1200);
</script>
{% endblock %}
