{% extends "base.html" %}
{% block title %}Lobby{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='lobby.css') }}">

<nav class="top-nav">
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    <a href="{{ url_for('logout') }}" class="logout-btn">Log Out</a>
</nav>

<div class="lobbybox">
    <h1>Lobby: #{{ game_id }}</h1>
</div>

<div class="playlist">
    <h2>Player List</h2>
    {% for player in allplayers %}
        <p>
            {{ player.display_name }}
            {% if player.id == host_id %}
                (Host)
            {% else %}
                {% if current_user.id == host_id %}
                    <!-- Host sees kick button for other players -->
                    <a href="{{ url_for('kickplayer', game_id=game_id, user_id=player.id) }}">
                        <button type="button" style="font-size:14px; padding:4px 8px; border-radius:10px;">
                            Kick
                        </button>
                    </a>
                {% endif %}
            {% endif %}
        </p>
    {% endfor %}
</div>


<div class="startbutton">
    {% if current_user.id == host_id %}
        <a href="{{ url_for('startgame', game_id=game_id) }}">
            <button>Start Game</button>
        </a>
    {% endif %}
</div>

<div class="leavebutton" style="text-align:center; margin-top:20px;">
    <a href="{{ url_for('leavegame', game_id=game_id) }}">
        <button>Leave Lobby</button>
    </a>
</div>

<script>
    // Auto-refresh player list every 2 seconds
    setInterval(function () {
        location.reload();
    }, 2000);
</script>
{% endblock %}
